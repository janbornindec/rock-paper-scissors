<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport", content="width=device-width, initial-scale=1.0">
        <title>Rock Paper Scissors</title>
        <script src="javascript.js"></script>
    </head>

    <body>
        <script>
            //three choices: Rock, Paper, Scissors
            const choices = ['rock','paper','scissors'];

            //computer to choose randomly 
            let getComputerChoice = () => Math.floor(Math.random() * 3);

            //user to input their choice
            function getUserChoice() {
                userSelection = prompt("Choose Rock, Paper or Scissors: ").toLowerCase();

                if (userSelection === 'rock' || userSelection === 'paper' || userSelection === 'scissors') {
                    return userSelection;
                } else {
                    alert("Invalid answer. Please check your spelling again. Choose Rock, Paper or Scissors.");
                    getUserChoice();
                };
            };

            //compare both choices, announce the winner
            let userWon = 0;
            let computerWon = 0;
            
            function chooseWinner() {
                if (computerSelection === 'rock') {

                    if (userSelection === 'rock') {
                        alert("It's a tie!");
                        console.log("Tie");
                    } else if (userSelection === 'paper') {
                        alert("Congrats, you won this round!");
                        console.log("User won");
                        userWon += 1;
                    } else {
                        alert("Oops, you lost this round!");
                        console.log("Computer won");
                        computerWon += 1;
                    };

                } else if (computerSelection === 'paper') {
                    if (userSelection === 'rock') {
                        alert("Oops, you lost this round!");
                        console.log("Computer won");
                        computerWon += 1;
                    } else if (userSelection === 'paper') {
                        alert("It's a tie!");
                        console.log("Tie");
                    } else {
                        alert("Congrats, you won this round!");
                        console.log("User won");
                        userWon += 1;
                    };

                } else {
                    if (userSelection === 'rock') {
                        alert("Congrats, you won this round!");
                        console.log("User won");
                        userWon += 1;
                    } else if (userSelection === 'paper') {
                        alert("Oops, you lost this round!");
                        console.log("Computer won");
                        computerWon += 1;
                    } else {
                        alert("It's a tie!");
                        console.log("Tie");
                    };
                };
            };

            //start the game
            let game = true; 
            //counting round
            let playRound = 0;
            while (game) {

                startGame = prompt('Are you ready to play? Y or N: ') ;

                //if user quit by other methods than entering N
                if (startGame === null) {
                    alert("You've cancelled the game. Refresh the page to start again.")
                    game = false;
                
                } else if (startGame[0].toUpperCase() === 'Y') {
                    //adding round each game
                    playRound += 1;
                    //print round number
                    msg = console.log("Round " + playRound + ":");
                    getComputerChoice();
                    computerSelection = choices[getComputerChoice()];
                    getUserChoice();
                    chooseWinner();
                    //make the game only lasts 5 rounds
                    if (playRound === 5) {
                        if (userWon > computerWon) {
                            alert("Congrats! You won " + userWon + " times out of 5!");
                            console.log("GAME OVER. User won the game")
                            break;
                        } else if (userWon < computerWon) {
                            alert("Uh oh! Computer won " + computerWon + " times out of 5!");
                            console.log("GAME OVER. Computer won the game");
                            break;
                        } else {
                            alert("It's a tie!")
                            console.log("GAME OVER. The game is a tie.")
                            break;
                        } break;
                    } else {
                        continue;
                    };

                } else if (startGame[0].toUpperCase() === 'N') {
                    alert("You've exited the game. Refresh the page to start again.")
                    game = false;
                    
                } else {
                    alert('Invalid answer. Please enter Y or N.');
                    continue;
                };
            };

        </script>
    </body>
</html>